<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Growth Profiles | Charting Annual Emissions</title>
  <meta name="description" content="This is an introduction to charting annual emissions inventory data." />
  <meta name="generator" content="bookdown 0.17.2 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Growth Profiles | Charting Annual Emissions" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an introduction to charting annual emissions inventory data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Growth Profiles | Charting Annual Emissions" />
  
  <meta name="twitter:description" content="This is an introduction to charting annual emissions inventory data." />
  

<meta name="author" content="David Holstius" />


<meta name="date" content="2020-03-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="04-throughputs.html"/>
<link rel="next" href="06-relative_changes.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Charting Annual Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="02-setup.html"><a href="02-setup.html"><i class="fa fa-check"></i><b>2</b> Setup</a><ul>
<li class="chapter" data-level="2.1" data-path="02-setup.html"><a href="02-setup.html#loading-required-libraries"><i class="fa fa-check"></i><b>2.1</b> Loading required libraries</a></li>
<li class="chapter" data-level="2.2" data-path="02-setup.html"><a href="02-setup.html#peeking-at-data"><i class="fa fa-check"></i><b>2.2</b> Peeking at data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-emissions.html"><a href="03-emissions.html"><i class="fa fa-check"></i><b>3</b> Emissions</a><ul>
<li class="chapter" data-level="3.1" data-path="03-emissions.html"><a href="03-emissions.html#key-functions"><i class="fa fa-check"></i><b>3.1</b> Key functions</a></li>
<li class="chapter" data-level="3.2" data-path="03-emissions.html"><a href="03-emissions.html#charting-annual-emissions"><i class="fa fa-check"></i><b>3.2</b> Charting annual emissions</a></li>
<li class="chapter" data-level="3.3" data-path="03-emissions.html"><a href="03-emissions.html#coloring-by-category"><i class="fa fa-check"></i><b>3.3</b> Coloring by category</a></li>
<li class="chapter" data-level="3.4" data-path="03-emissions.html"><a href="03-emissions.html#flagging-specific-values"><i class="fa fa-check"></i><b>3.4</b> Flagging specific values</a></li>
<li class="chapter" data-level="3.5" data-path="03-emissions.html"><a href="03-emissions.html#humanizing-category-names"><i class="fa fa-check"></i><b>3.5</b> Humanizing category names</a></li>
<li class="chapter" data-level="3.6" data-path="03-emissions.html"><a href="03-emissions.html#titling-and-captioning"><i class="fa fa-check"></i><b>3.6</b> Titling and captioning</a></li>
<li class="chapter" data-level="3.7" data-path="03-emissions.html"><a href="03-emissions.html#making-an-area-chart"><i class="fa fa-check"></i><b>3.7</b> Making an area chart</a></li>
<li class="chapter" data-level="3.8" data-path="03-emissions.html"><a href="03-emissions.html#more-than-one-pollutant"><i class="fa fa-check"></i><b>3.8</b> More than one pollutant</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-throughputs.html"><a href="04-throughputs.html"><i class="fa fa-check"></i><b>4</b> Throughputs</a><ul>
<li class="chapter" data-level="4.1" data-path="04-throughputs.html"><a href="04-throughputs.html#obtaining-throughput-data"><i class="fa fa-check"></i><b>4.1</b> Obtaining throughput data</a></li>
<li class="chapter" data-level="4.2" data-path="04-throughputs.html"><a href="04-throughputs.html#charting-annual-throughputs"><i class="fa fa-check"></i><b>4.2</b> Charting annual throughputs</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-growth_profiles.html"><a href="05-growth_profiles.html"><i class="fa fa-check"></i><b>5</b> Growth Profiles</a><ul>
<li class="chapter" data-level="5.1" data-path="05-growth_profiles.html"><a href="05-growth_profiles.html#normalized-growth-factors"><i class="fa fa-check"></i><b>5.1</b> Normalized growth factors</a></li>
<li class="chapter" data-level="5.2" data-path="05-growth_profiles.html"><a href="05-growth_profiles.html#county-specific-growth-profiles"><i class="fa fa-check"></i><b>5.2</b> County-specific growth profiles</a></li>
<li class="chapter" data-level="5.3" data-path="05-growth_profiles.html"><a href="05-growth_profiles.html#raw-growth-profile-data"><i class="fa fa-check"></i><b>5.3</b> Raw growth profile data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-relative_changes.html"><a href="06-relative_changes.html"><i class="fa fa-check"></i><b>6</b> Relative Changes</a><ul>
<li class="chapter" data-level="6.1" data-path="06-relative_changes.html"><a href="06-relative_changes.html#relative-changes-in-emissions"><i class="fa fa-check"></i><b>6.1</b> Relative changes in emissions</a></li>
<li class="chapter" data-level="6.2" data-path="06-relative_changes.html"><a href="06-relative_changes.html#relative-changes-in-throughputs"><i class="fa fa-check"></i><b>6.2</b> Relative changes in throughputs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-emission_factors.html"><a href="07-emission_factors.html"><i class="fa fa-check"></i><b>7</b> Emission Factors</a></li>
<li class="chapter" data-level="8" data-path="08-control_factors.html"><a href="08-control_factors.html"><i class="fa fa-check"></i><b>8</b> Control Factors</a><ul>
<li class="chapter" data-level="8.1" data-path="08-control_factors.html"><a href="08-control_factors.html#example-domestic-woodstoves"><i class="fa fa-check"></i><b>8.1</b> Example: domestic woodstoves</a></li>
<li class="chapter" data-level="8.2" data-path="08-control_factors.html"><a href="08-control_factors.html#example-gasoline-filling-stations"><i class="fa fa-check"></i><b>8.2</b> Example: gasoline filling stations</a></li>
<li class="chapter" data-level="8.3" data-path="08-control_factors.html"><a href="08-control_factors.html#control-effectiveness-vs.annualized-control-factors"><i class="fa fa-check"></i><b>8.3</b> Control effectiveness vs. annualized control factors</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-comparing_inventories.html"><a href="09-comparing_inventories.html"><i class="fa fa-check"></i><b>9</b> Comparing Inventories</a><ul>
<li class="chapter" data-level="9.1" data-path="09-comparing_inventories.html"><a href="09-comparing_inventories.html#binding-inventories-together"><i class="fa fa-check"></i><b>9.1</b> Binding inventories together</a></li>
<li class="chapter" data-level="9.2" data-path="09-comparing_inventories.html"><a href="09-comparing_inventories.html#comparing-two-versions-of-a-single-category"><i class="fa fa-check"></i><b>9.2</b> Comparing two versions of a single category</a></li>
<li class="chapter" data-level="9.3" data-path="09-comparing_inventories.html"><a href="09-comparing_inventories.html#multiple-categories"><i class="fa fa-check"></i><b>9.3</b> Groups of categories</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-third_party.html"><a href="10-third_party.html"><i class="fa fa-check"></i><b>10</b> Third-Party Data</a><ul>
<li class="chapter" data-level="10.1" data-path="10-third_party.html"><a href="10-third_party.html#natural-gas-consumption"><i class="fa fa-check"></i><b>10.1</b> Natural Gas Consumption</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>A</b> Advanced Usage</a><ul>
<li class="chapter" data-level="A.1" data-path="appendix.html"><a href="appendix.html#appendix-howto-county_fractions"><i class="fa fa-check"></i><b>A.1</b> Calculating county fractions from raw growth profile data</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix.html"><a href="appendix.html#special-cases"><i class="fa fa-check"></i><b>B</b> Special Cases</a><ul>
<li class="chapter" data-level="B.1" data-path="appendix.html"><a href="appendix.html#appendix-case-cat_283"><i class="fa fa-check"></i><b>B.1</b> Changes in forecasts for category #283</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="appendix.html"><a href="appendix.html#technical-documentation"><i class="fa fa-check"></i><b>C</b> Technical Documentation</a><ul>
<li class="chapter" data-level="C.1" data-path="appendix.html"><a href="appendix.html#appendix-doc-control_factors"><i class="fa fa-check"></i><b>C.1</b> Control factors</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Charting Annual Emissions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="growth-profiles" class="section level1">
<h1><span class="header-section-number">5</span> Growth Profiles</h1>
<p><strong>This chapter shows how to chart growth profiles.</strong></p>
<p>In the previous chapter, we saw how to use <code>chart_annual_growth_by()</code> to examine relative changes in estimates of emissions and throughputs. We can also use <code>chart_annual_growth_by()</code> that have already been “normalized”, like growth profiles.</p>
<p>This chapter also introduces several new functions:</p>
<ul>
<li><code>DB_growth_profiles()</code></li>
<li><code>DB_growth_profile_crosswalk()</code></li>
<li><code>DB_raw_growth_profiles()</code></li>
<li><code>chart_annual_quantities_by()</code></li>
</ul>
<p>We’ll use the ones beginning with <code>DB_</code> to fetch some growth profile data stored in DataBank. And, we’ll use <code>chart_annual_quantities_by()</code> to plot the raw (non-normalized) numbers behind a specific growth profile.</p>
<div id="normalized-growth-factors" class="section level2">
<h2><span class="header-section-number">5.1</span> Normalized growth factors</h2>
<p>Let’s start by pulling normalized <code>BY2011</code> growth factors from DataBank.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co"># `DB_growth_profiles()` automatically normalizes BY2011 profiles to CY2011. If</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co"># you would like them normalized to a different year, just alter the value of</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># `ref_year`, below.</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co"># `DB_growth_profiles()` also does the work of linking profiles to categories,</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co"># consistent with the configuration stored in DataBank for the given base year.</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co"># </span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9">BY2011_growth_profile_data &lt;-</a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="st">  </span><span class="kw">BY</span>(<span class="dv">2011</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="st">  </span><span class="kw">DB_growth_profiles</span>(</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">    <span class="dt">ref_year =</span> <span class="kw">CY</span>(<span class="dv">2011</span>),</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">    <span class="dt">years =</span> <span class="kw">CY</span>(<span class="dv">1990</span><span class="op">:</span><span class="dv">2040</span>),</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">    <span class="dt">verbose =</span> <span class="ot">TRUE</span>) </a></code></pre></div>
<p>With these in hand, we can chart the profile for BY2011 category #283 “Residential Combustion”. We use the same function, <code>chart_annual_growth_by()</code>, that we learned about in the previous chapter.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># Chart the relative growth in these growth factors. </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">BY2011_growth_profile_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st">  </span><span class="kw">filter_categories</span>(</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">    <span class="st">&quot;#283 Space Heating&quot;</span> =<span class="st"> </span><span class="dv">283</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="st">  </span><span class="kw">chart_annual_growth_by</span>(</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">    cnty_abbr,</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">    <span class="dt">base_year =</span> <span class="kw">CY</span>(<span class="dv">2011</span>),</a>
<a class="sourceLine" id="cb14-10" data-line-number="10">    <span class="dt">flag_years =</span> <span class="kw">CY</span>(<span class="dv">1993</span>, <span class="dv">2011</span>, <span class="dv">2030</span>),</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">    <span class="dt">title =</span> <span class="st">&quot;Residential NG Combustion: Space and Water Heating&quot;</span>,</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">    <span class="dt">subtitle =</span> <span class="kw">str_c</span>(</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">      <span class="st">&quot;This is the growth profile associated with category #283 in BY2011.&quot;</span>,</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">      <span class="st">&quot;There is a +9% change from CY2011 to CY2030.&quot;</span>,</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">      <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</a></code></pre></div>
<p><img src="Charting-Annual-Data_files/figure-html/BY2011_growth_profile_data-cat_283-chart_annual_growth-1.svg" width="800" height="400" /></p>
</div>
<div id="county-specific-growth-profiles" class="section level2">
<h2><span class="header-section-number">5.2</span> County-specific growth profiles</h2>
<p>The above profile for natural gas usage doesn’t vary by county, but we can look at one that does. In DataBank, the growth profile associated with BY2011 category #761 “Sanitary Sewers” is a good example.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co"># Chart the *raw* growth profile data for profile #657 &quot;Household Population&quot;.</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co"># Profile #657 was used to project BY2011 category #761 &quot;Sanitary Sewers&quot;.</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co"># </span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">BY2011_growth_profile_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="st">  </span><span class="kw">filter_categories</span>(</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">    <span class="st">&quot;#761 Sanitary Sewers&quot;</span> =<span class="st"> </span><span class="dv">761</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="st">  </span><span class="kw">chart_annual_growth_by</span>(</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">    <span class="dt">color =</span> cnty_abbr,</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">    <span class="dt">base_year =</span> <span class="kw">CY</span>(<span class="dv">2011</span>),</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">    <span class="dt">title =</span> <span class="st">&quot;Household Population (Growth Profile #657)&quot;</span>,</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">    <span class="dt">subtitle =</span> <span class="st">&#39;Used to project BY2011 category #761 &quot;Sanitary Sewers&quot;.&#39;</span>)</a></code></pre></div>
<p><img src="Charting-Annual-Data_files/figure-html/BY2011_raw_growth_profile_data-cat_716-chart_annual_quantities_by-cnty_abbr-1.svg" width="800" height="400" /></p>
</div>
<div id="raw-growth-profile-data" class="section level2">
<h2><span class="header-section-number">5.3</span> Raw growth profile data</h2>
<p>What if we wanted to chart the un-normalized (“raw”) growth profile data?</p>
<ul>
<li>First, we can pull the raw numbers, using <code>DB_raw_growth_profiles()</code> instead of <code>DB_growth_profiles()</code>.</li>
<li>Then, we find the profile associated with a given BY2011 category ID, using <code>DB_growth_profile_crosswalk()</code>.</li>
<li>Finally, we can use <code>chart_annual_quantities()</code>, rather than <code>chart_annual_growth()</code>, to plot the numbers. This ensures that the numbers <em>aren’t</em> normalized in the process of creating the chart.</li>
</ul>
<div id="pulling-raw-growth-profile-data" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Pulling raw growth profile data</h3>
<p>Unlike <code>DB_growth_profiles()</code>, <code>DB_raw_growth_profiles()</code> does <em>not</em> normalize anything. It just assembles and returns whatever is contained in <code>t0335</code>, <code>t0336</code>, and <code>t0337</code>. Those numbers might be:</p>
<ul>
<li>already normalized to CY2011; or</li>
<li>already normalized to a previous “base year” (like CY2008); or</li>
<li>in some natural unit, like “persons” or “acres”.</li>
</ul>
<p>(It varies from profile to profile.)</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co"># By default, `BY2011_raw_growth_profile_data()` returns nested results.</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co"># Those are one row per profile, not one row per (profile, year, county). </span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co"># </span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co"># Here, we override that with `nested = FALSE`.</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7">BY2011_raw_growth_profile_data &lt;-</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="st">  </span><span class="kw">BY</span>(<span class="dv">2011</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="st">  </span><span class="kw">DB_raw_growth_profiles</span>(</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">    <span class="dt">nested =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">    <span class="dt">years =</span> <span class="kw">CY</span>(<span class="dv">1990</span><span class="op">:</span><span class="dv">2040</span>),</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">    <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="finding-the-profile-associated-with-a-by2011-category-id" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Finding the profile associated with a BY2011 category ID</h3>
<p>Let’s look up the growth profile associated with BY2011 category #761 “Sanitary Sewers”.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co"># Figure out the ID of the growth profile that&#39;s been associated with BY2011</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co"># category #761 &quot;Sanitary Sewers&quot;.</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co"># </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="kw">BY</span>(<span class="dv">2011</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="st">  </span><span class="kw">DB_growth_profile_crosswalk</span>(</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">    <span class="dt">verbose =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="st">  </span><span class="kw">filter_categories</span>(</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">    <span class="st">&quot;#761 Sanitary Sewers&quot;</span> =<span class="st"> </span><span class="dv">761</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">cat_id</th>
<th align="left">cat_h0</th>
<th align="right">gpf_id</th>
<th align="left">backcast</th>
<th align="left">forecast</th>
<th align="left">category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">761</td>
<td align="left">Area Source</td>
<td align="right">657</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">#761 Sanitary Sewers</td>
</tr>
</tbody>
</table>
<p>Above, we can see that the relevant growth profile ID is #657. Now we can look up the metadata associated with it: <code>gpf_name</code> (name), <code>gpf_staff</code> (staff), etc.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">BY2011_raw_growth_profile_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">    gpf_id <span class="op">==</span><span class="st"> </span><span class="dv">657</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw">distinct</span>(</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">    gpf_id,</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">    gpf_name,</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">    gpf_staff,</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">    gpf_date)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">gpf_id</th>
<th align="left">gpf_name</th>
<th align="left">gpf_staff</th>
<th align="left">gpf_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">657</td>
<td align="left">Household Population</td>
<td align="left">Minh H Nguyen</td>
<td align="left">2010-02-25</td>
</tr>
</tbody>
</table>
<p>The name associated with this profile turns out to be “Household Population”. It was last updated, according to DataBank, on 2010-02-25.</p>
</div>
<div id="charting-the-un-normalized-raw-growth-profile-data" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Charting the un-normalized (“raw”) growth profile data</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="co"># Still charting `BY2011_raw_growth_profile_data`, but using</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="co"># `chart_annual_quantities_by()` instead of `chart_annual_growth_by()`.</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">#</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co"># Now we can see the offsets, as well as the slopes, that are in the raw data.</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co"># If we knew their units, we could label the y-axis ... but we don&#39;t.</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co"># </span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9">BY2011_raw_growth_profile_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="st">  </span><span class="kw">filter</span>(</a>
<a class="sourceLine" id="cb19-11" data-line-number="11">    gpf_id <span class="op">==</span><span class="st"> </span><span class="dv">657</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="st">  </span><span class="kw">chart_annual_quantities_by</span>(</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">    <span class="dt">color =</span> cnty_abbr,</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">    <span class="dt">flag_years =</span> <span class="kw">CY</span>(<span class="dv">2011</span>),</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">    <span class="dt">flag_labels =</span> <span class="st">&quot;{format(gf_qty, big.mark = &#39;,&#39;, digits = 4, trim = TRUE)}&quot;</span>,</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">    <span class="dt">title =</span> <span class="st">&quot;Household Population (Growth Profile #657)&quot;</span>,</a>
<a class="sourceLine" id="cb19-17" data-line-number="17">    <span class="dt">subtitle =</span> <span class="st">&#39;Used to project BY2011 category #761 &quot;Sanitary Sewers&quot;.&#39;</span>)</a></code></pre></div>
<p><img src="Charting-Annual-Data_files/figure-html/BY2011_raw_growth_profile_data-gpf_657-chart_annual_quantities_by-cnty_abbr-1.svg" width="800" height="400" /></p>
</div>
<div id="a-note-on-county-fractions" class="section level3">
<h3><span class="header-section-number">5.3.4</span> A note on county fractions</h3>
<p>Why are the above lines offset from each other, even at <code>CY2011</code>? Because we’re plotting the <em>raw</em> growth profile data! (Since this profile is labeled “Household Population”, we might presume that the units are in persons. Without going into further detail, these numbers do seem consistent with Bay Area county populations.)</p>
<p><strong>The offsets are interesting</strong> — they’re not junk. See the <a href="appendix.html#appendix-howto-county_fractions">Appendix</a> to learn how to compute county fractions from raw growth profile data. (This is also a good way to double-check county fractions.)</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="04-throughputs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="06-relative_changes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/BAAQMD/charting-annual-data/edit/master/05-growth_profiles.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/BAAQMD/charting-annual-data/blob/master/05-growth_profiles.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
